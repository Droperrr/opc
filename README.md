# 🚀 OPC - Optimized Production Code

**Адаптивная торговая система для анализа опционов SOL и генерации торговых сигналов**

## 📋 Описание

OPC - это оптимизированная версия торговой системы, предназначенная для анализа опционов SOL и генерации торговых сигналов. Система включает модули для сбора данных с бирж, анализа волатильности, генерации сигналов и бэктестинга стратегий.

## ✨ Ключевые возможности

- 🔄 **Автоматический сбор данных** - регулярное обновление данных с бирж
- 📊 **Анализ волатильности** - комплексный анализ IV, Skew и Open Interest
- 🎯 **Генерация сигналов** - множественные стратегии для торговых сигналов
- 🔬 **Бэктестинг** - тестирование стратегий на исторических данных
- 📈 **Веб-интерфейс** - удобный мониторинг системы
- ⚡ **Высокая производительность** - оптимизированные алгоритмы

## 🏗️ Архитектура

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Data Sources  │    │  Signal Gen     │    │   Backtesting   │
│                 │    │                 │    │                 │
│ • Bybit API     │───▶│ • Trend Analysis│───▶│ • Performance   │
│ • Jupiter API   │    │ • IV Analysis   │    │ • Risk Metrics  │
│ • Historical    │    │ • OI Analysis   │    │ • Optimization  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Database      │    │  Main Pipeline  │    │   Monitoring    │
│                 │    │                 │    │                 │
│ • SQLite DB     │    │ • Orchestration │    │ • Error Monitor │
│ • Data Storage  │    │ • Component Mgmt│    │ • Performance   │
│ • Caching       │    │ • Workflow      │    │ • Alerts        │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🚀 Быстрый старт

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Запуск основного пайплайна

```bash
python main_pipeline.py
```

### 3. Запуск автоматического сбора данных

```bash
python scheduler.py
```

### 4. Запуск веб-интерфейса

```bash
python ui_dashboard.py
```

Затем откройте браузер и перейдите по адресу: `http://localhost:8501`

## 📁 Структура проекта

### 🔧 Ядро системы
- `main_pipeline.py` - Основной пайплайн системы
- `prediction_layer.py` - Слой предсказаний
- `error_monitor.py` - Мониторинг ошибок
- `block_detector.py` - Детектор блоков
- `block_analyzer.py` - Анализатор блоков
- `formula_engine.py` - Движок формул
- `block_reporting.py` - Отчетность

### 📊 Сбор данных
- `database.py` - Работа с базой данных
- `get_iv.py` - Получение данных волатильности
- `futures_collector.py` - Сбор исторических данных
- `enrich_options.py` - Обогащение данных опционов
- `historical_iv_collector.py` - Сбор исторических IV
- `historical_basis_collector.py` - Сбор исторических basis

### 🎯 Генерация сигналов
- `signal_generator.py` - Базовая генерация сигналов
- `signal_generator_v2.py` - Улучшенная версия
- `signal_generator_v3.py` - Оптимизированная версия
- `trend_signals.py` - Трендовые сигналы
- `signals.py` - Альтернативная система
- `entry_generator.py` - Генерация точек входа

### 🔬 Бэктестинг
- `backtest_engine.py` - Основной движок бэктестинга
- `backtest_signals.py` - Бэктестинг сигналов
- `advanced_backtest_system.py` - Продвинутая система

### ⚙️ Инфраструктура
- `scheduler.py` - Планировщик
- `logger.py` - Система логирования
- `compatibility.py` - Совместимость
- `ui_dashboard.py` - Веб-интерфейс

## 🔧 Конфигурация

### Переменные окружения

Создайте файл `.env` в корне проекта:

```env
# API Configuration
BYBIT_API_KEY=your_api_key
BYBIT_API_SECRET=your_api_secret

# Database Configuration
DB_PATH=data/sol_iv.db
OPTIONS_DB_PATH=data/options_enriched.db

# Scheduler Configuration
FETCH_INTERVAL_MINUTES=15

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=logs/system.log
```

## 📊 Мониторинг

### Веб-интерфейс

Система включает веб-интерфейс для мониторинга:

- 📈 **Дашборд** - общая статистика системы
- 🔍 **Анализ данных** - просмотр собранных данных
- ⚠️ **Алерты** - уведомления об ошибках
- 📋 **Логи** - просмотр логов системы

### Логирование

Все события записываются в логи:
- `logs/system.log` - основные события
- `logs/errors.log` - ошибки системы
- `logs/data_collection.log` - сбор данных

## 🧪 Тестирование

### Запуск тестов

```bash
# Все тесты
pytest

# Конкретный модуль
pytest test_main_pipeline.py

# С покрытием
pytest --cov=.
```

### Тестовые модули

- `test_main_pipeline.py` - Тесты основного пайплайна
- `test_block_components.py` - Тесты компонентов
- `test_compatibility.py` - Тесты совместимости
- `test_error_monitor.py` - Тесты мониторинга

## 📈 Производительность

- **Время отклика**: < 1 секунды для генерации сигналов
- **Покрытие данных**: 24/7 мониторинг рынка
- **Точность**: Калиброванные параметры на основе исторических данных
- **Масштабируемость**: Поддержка множественных активов

## 🛠️ Технические требования

- **Python**: 3.8+
- **База данных**: SQLite (встроенная)
- **Память**: Минимум 2GB RAM
- **Диск**: 10GB свободного места
- **Сеть**: Стабильное интернет-соединение для API

## 📝 Лицензия

Проект разработан для внутреннего использования. Все права защищены.

## 🤝 Поддержка

Для получения поддержки обращайтесь к команде разработки.

---

**Версия**: 1.0.0  
**Дата**: 2025-09-06  
**Статус**: Production Ready
